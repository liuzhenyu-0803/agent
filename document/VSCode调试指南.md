# VSCode 调试 Electron 应用指南

## 配置说明

项目已经配置了 `.vscode/launch.json`，包含了两个调试配置：

1. Debug Main Process - 调试 Electron 主进程
2. Debug Renderer Process - 调试渲染进程（React 应用）
3. Debug All - 同时调试主进程和渲染进程

## 调试步骤

1. **启动调试**
   - 在 VSCode 中按下 F5 键
   - 或点击 VSCode 左侧调试面板，选择 "Debug All" 配置后点击绿色播放按钮

2. **设置断点**
   - 主进程断点（main.js）：直接在行号左侧点击设置断点
   - 渲染进程断点（React 代码）：在 src 目录下的相应文件中设置断点

3. **调试功能**
   - 使用 VSCode 调试工具栏进行：
     - 继续执行 (F5)
     - 单步跳过 (F10)
     - 单步调试 (F11)
     - 单步跳出 (Shift+F11)
     - 重新启动 (Ctrl+Shift+F5)
     - 停止 (Shift+F5)

4. **查看调试信息**
   - Variables（变量）面板：查看当前作用域的变量值
   - Watch（监视）面板：添加想要监视的变量或表达式
   - Call Stack（调用堆栈）：查看代码的调用路径
   - Debug Console（调试控制台）：查看日志输出和执行命令

## 注意事项

1. 确保先停止其他正在运行的 Electron 实例
2. 主进程代码修改后需要重新启动调试
3. 渲染进程代码修改会通过 Vite 热更新自动生效
4. 如果断点未生效，检查：
   - 是否启用了源码映射（sourcemap）
   - 是否正确选择了调试配置
   - 代码是否正确构建

## 常见问题解决

1. **断点不生效**
   - 检查 vite.config.js 中是否启用了 sourcemap（默认就是启用的）
   - 确认是否选择了正确的调试配置
   - 尝试重新启动调试会话

2. **渲染进程连接失败**
   - 确保 launch.json 中的调试端口（9222）未被占用
   - 检查是否启动了多个 Electron 实例

3. **代码修改后断点失效**
   - 主进程：重新启动调试会话
   - 渲染进程：等待热更新完成后重新设置断点